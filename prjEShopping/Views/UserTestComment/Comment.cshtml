
    @{
        ViewBag.Title = "Comment";
    }

    <h2>Comment</h2>

    <div class="container bg-success rounded py-2 mt-3">
        <div class="bg-warning p-3 mb-3">
            <span class="fs-4 fw-bold">商品評價</span>
        </div>

        <p>
            <button class="btn btn-secondary" type="button" onclick="toggleCollapse('allstar')" aria-expanded="false" aria-controls="allstar">
                全部<span>(@ViewBag.AllStarCount)</span>
            </button>
            <button class="btn btn-secondary" type="button" onclick="toggleCollapse('fivestar')" aria-expanded="false" aria-controls="fivestar">
                5星<span>(@ViewBag.FiveStarCount)</span>
            </button>
            <button class="btn btn-secondary" type="button" onclick="toggleCollapse('fourstar')" aria-expanded="false" aria-controls="fourstar">
                4星<span>(@ViewBag.FourStarCount)</span>
            </button>
            <button class="btn btn-secondary" type="button" onclick="toggleCollapse('threestar')" aria-expanded="false" aria-controls="threestar">
                3星<span>(@ViewBag.ThreeStarCount)</span>
            </button>
            <button class="btn btn-secondary" type="button" onclick="toggleCollapse('twostar')" aria-expanded="false" aria-controls="twostar">
                2星<span>(@ViewBag.TwoStarCount)</span>
            </button>
            <button class="btn btn-secondary" type="button" onclick="toggleCollapse('onestar')" aria-expanded="false" aria-controls="onestar">
                1星<span>(@ViewBag.OneStarCount)</span>
            </button>
        </p>

        @foreach (var rating in Model)
        {
            <div class="collapse" id="@("rating_" + rating.RatingId)">
                <div class="card card-body">
                    <!-- 顯示評分星星 -->
                    <div>評分：@rating.StarRating</div>
                    <!-- 顯示評論內容 -->
                    <div>評論：@rating.RatingText</div>
                    <div>評論時間：@rating.PostTime</div>
                    @if (ViewBag.SellerReplies.ContainsKey(rating.RatingId))
                    {
                        <div>賣家回覆：@ViewBag.SellerReplies[rating.RatingId]</div>
                    }

                </div>
            </div>
        }
        <!-- 五星內容 -->
        <div class="collapse" id="fivestar">
            <div class="card card-body">
                @foreach (var rating in ViewBag.FiveStarRatings)
                {
                    <!-- 顯示評分星星 -->
                    <div>評分：@rating.StarRating</div>
                    <!-- 顯示評論內容 -->
                    <div>評論：@rating.RatingText</div>
                    <div>評論時間：@rating.PostTime</div>
                    if (ViewBag.SellerReplies.ContainsKey(rating.RatingId))
                    {
                        <div>賣家回覆：@ViewBag.SellerReplies[rating.RatingId]</div>
                    }
                }
            </div>
        </div>
        <!-- 四星內容 -->
        <div class="collapse" id="allstar">
            <div class="card card-body">
                @foreach (var rating in ViewBag.FourStarRatings)
                {
                    <!-- 顯示評分星星 -->
                    <div>評分：@rating.StarRating</div>
                    <!-- 顯示評論內容 -->
                    <div>評論：@rating.RatingText</div>
                    <div>評論時間：@rating.PostTime</div>
                    if (ViewBag.SellerReplies.ContainsKey(rating.RatingId))
                    {
                        <div>賣家回覆：@ViewBag.SellerReplies[rating.RatingId]</div>
                    }
                }
            </div>
        </div>
        <!-- 三星內容 -->
        <div class="collapse" id="allstar">
            <div class="card card-body">
                @foreach (var rating in ViewBag.ThreeStarRatings)
                {<!-- 顯示評分星星 -->
                    <div>評分：@rating.StarRating</div>
                    <!-- 顯示評論內容 -->
                    <div>評論：@rating.RatingText</div>
                    <div>評論時間：@rating.PostTime</div>
                    if (ViewBag.SellerReplies.ContainsKey(rating.RatingId))
                    {
                        <div>賣家回覆：@ViewBag.SellerReplies[rating.RatingId]</div>
                    }
                }
            </div>
        </div>
        <!-- 兩星內容 -->
        <div class="collapse" id="allstar">
            <div class="card card-body">
                @foreach (var rating in ViewBag.TwoStarRatings)
                {
                    <!-- 顯示評分星星 -->
                    <div>評分：@rating.StarRating</div>
                    <!-- 顯示評論內容 -->
                    <div>評論：@rating.RatingText</div>
                    <div>評論時間：@rating.PostTime</div>
                    if (ViewBag.SellerReplies.ContainsKey(rating.RatingId))
                    {
                        <div>賣家回覆：@ViewBag.SellerReplies[rating.RatingId]</div>
                    }
                }
            </div>
        </div>
        <!-- 一星內容 -->
        <div class="collapse" id="allstar">
            <div class="card card-body">
                @foreach (var rating in ViewBag.OneStarRatings)
                {
                    <!-- 顯示評分星星 -->
                    <div>評分：@rating.StarRating</div>
                    <!-- 顯示評論內容 -->
                    <div>評論：@rating.RatingText</div>
                    <div>評論時間：@rating.PostTime</div>
                    if (ViewBag.SellerReplies.ContainsKey(rating.RatingId))
                    {
                        <div>賣家回覆：@ViewBag.SellerReplies[rating.RatingId]</div>
                    }
                }
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- 在頁面底部加入以下腳本 -->
    <script>
        // 顯示初始的星級內容（全部）
        $(document).ready(function () {
            $("#allstar").addClass("show");
        });

        // 切換評價內容的函數
        function toggleCollapse(collapseId) {
            $(".collapse").removeClass("show"); // 先隱藏所有評價內容
            $("#" + collapseId).addClass("show"); // 顯示所選的評價內容
        }
    </script>
