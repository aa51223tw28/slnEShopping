@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
    //主頁
}
@Html.Action("ADWall", "Main")
<div class="bg-light">
    <div class="container bg-success rounded pt-2">
        <!-- 輪播圖 -->
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="~/img/APPLE輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/dyson輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/LG輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/三星輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/小米輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <!-- 暢銷排行 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <h2 class="pt-3 ps-2 fw-bold fs-3 text">暢銷排行</h2>

        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3" id="maintop5">

        </div>

    </div>



    <!-- 商品分類 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">商品分類</h2>
            <a href="@Url.Action("UserProdutList", "UserProduct")">
                <div class="btn btn-warning my-2" type="button">查看全部...</div>
            </a>
        </div>
        <div class="bg-white border-1">
            <div class="container p-0 px-md-3">
                <div class="row row-cols-auto row-cols-md-auto row-cols-lg-auto">
                    <a href="/UserProduct/UserProdutList?subcategory=101" class="col mb-3">
                        <div class="card">
                            <img src="~/img/laptop128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">筆電</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=203" class="col mb-3">
                        <div class="card">
                            <img src="~/img/camera128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">相機</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=108" class="col mb-3">
                        <div class="card">
                            <img src="~/img/stereo128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">音響</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=201" class="col mb-3">
                        <div class="card">
                            <img src="~/img/smartphone128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">手機</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=301" class="col mb-3">
                        <div class="card">
                            <img src="~/img/refrigerator128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">冰箱</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=302" class="col mb-3">
                        <div class="card">
                            <img src="~/img/washing-machine128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">洗衣機</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=306" class="col mb-3">
                        <div class="card">
                            <img src="~/img/oven128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">烤箱</h5>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>




    <!-- 賣家品牌館 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">賣家品牌館</h2>
            <button class="btn btn-warning my-2" type="button">查看全部...</button>
        </div>
        <div class="bg-white border-1">
            <div class="container p-0 px-md-3">
                <div class="row row-cols-auto row-cols-md-auto row-cols-lg-auto">
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/xiaomi128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">小米</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/asus128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">ASUS</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/sony128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">SONY</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/Panasonic128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">Panasonic</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/apple-logo128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">Apple</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/samsung128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">Samsung</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/sampo128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">SAMPO</h5>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>




    <!-- 折價券專區 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">折價券專區</h2>
            @*<button class="btn btn-warning my-2" type="button">查看全部...</button>*@
            <a href="@Url.Action("UserCouponList", "UserCoupon")">
                <input type="button" class="btn btn-warning my-2" value="查看全部..." />
            </a>
        </div>
        <div class="bg-white border-1 d-flex flex-wrap">
            @*<div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>
                <div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>
                <div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>
                <div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>*@
            @Html.Action("CouponListForMain", "Coupons")
            @Html.Action("ADWall", "Main")
        </div>
    </div>

    <!-- 限時特賣 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">限時特賣</h2>
            @*<button class="btn btn-warning my-2" type="button">查看全部...</button>*@
        </div>
        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3">
            @Html.Action("MaleSale", "Main")

        </div>
    </div>
</div>


@section Scripts
    {
    <script>

        //暢銷排行
        const maintop5 = document.querySelector("#maintop5");
        $(document).ready(async function () {
            const response = await fetch('@Url.Content("~/Main/getTop5ProductMain")');
            const data = await response.json();

            const top5products = data.map(product => {
                return(`<div class="col">
                            <div class="card w-100">
                                <img src="/img/${product.ProductImagePathOne}" class="card-img-top px-4 pt-4" alt="...">
                                <div class="card-body">
                                    <p class="card-title">${product.ProductName}</p>

                                    <span class="card-text text-danger fw-bold mb-1">NT$${Math.floor(product.Price).toLocaleString()}</span>

                                    <p style="font-size: 8px;" class="card-text mb-1">已售出：${product.QuantitySold}</p>

                                    <a href="@Url.Action("UserSingleProduct", "UserProduct")?productid=${product.ProductId}"" class="btn btn-secondary">了解更多...</a>
                                </div>
                            </div>
                        </div>`)
            })

            maintop5.innerHTML = top5products.join("");
        })

        $(document).ready(function () {
            // Show the modal when the page loads
            $('#adModal').modal('show');

            // Hide the modal when the image is clicked
            $('#adImage').click(function () {
                $('#adModal').modal('hide');
            });

            // Set a timeout to hide the modal after 5 seconds
            setTimeout(function () {
                $('#adModal').modal('hide');
            }, 5000);
        });
    </script>
}
@section Styles{
    <style>
        .modal-content {
            background-color: rgba(0, 0, 0, 0.7); /* 半透明的黑色背景 */
            border: none;
        }

        .modal-body {
            padding: 30px; /* 黑色邊框的大小 */
        }

        #adImage {
            width: 100%; /* 圖片寬度調至最大 */
            height: auto; /* 高度自動調整以保持原始的長寬比 */
            max-height: calc(100% - 60px); /* 保留上下各30px的黑色邊框 */
        }
    </style>
}
