@model IEnumerable<prjEShopping.Models.EFModels.Product>

@{
    ViewBag.Title = "ADDemo";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
}

<style>
    .border-colorful {
        border: 3px solid;
        border-image: linear-gradient(to right, red, yellow, green, blue, violet);
        border-image-slice: 1;
    }

    .time-sale-banner {
        position: absolute;
        top: 10%;
        left: 0;
        width: 100%;
        text-align: center;
        background-color: rgba(255, 0, 0, 0.6); /* 红色背景，透明度60% */
        color: white;
        padding: 5px 0;
    }
</style>
<h2>限時廣告DEMO</h2>
<!-- Bootstrap Modal -->
@if (@ViewBag.Wall != null)
{
    <div class="modal fade" id="adModal" tabindex="-1" role="dialog" aria-labelledby="adModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-fullscreen" role="document">
            <div class="modal-content">
                <div class="modal-body d-flex justify-content-center align-items-center">
                    <!-- Your Ad Content Here -->
                    <img src="@ViewBag.Wall" alt="Advertisement" class="img-fluid cursor-pointer" id="adImage">
                </div>
            </div>
        </div>
    </div>
}

<div class="bg-light">
    <div class="container bg-success rounded pt-2">
        <!-- 輪播圖 -->
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="~/img/APPLE輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/dyson輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/LG輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/三星輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="~/img/小米輪播圖.jpg" class="d-block w-100" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <!-- 暢銷排行 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <h2 class="pt-3 ps-2 fw-bold fs-3 text">暢銷排行</h2>
        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3">
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/hot1.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">PlayStation 5 主機</h5>
                        <p class="card-text text-danger fw-bold">$17,880</p>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/hot1.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">PlayStation 5 主機</h5>
                        <p class="card-text text-danger fw-bold">$17,880</p>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/hot1.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">PlayStation 5 主機</h5>
                        <p class="card-text text-danger fw-bold">$17,880</p>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/hot1.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">PlayStation 5 主機</h5>
                        <p class="card-text text-danger fw-bold">$17,880</p>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/hot1.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">PlayStation 5 主機</h5>
                        <p class="card-text text-danger fw-bold">$17,880</p>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- 商品分類 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">商品分類</h2>
            <a href="@Url.Action("UserProdutList", "UserProduct")">
                <div class="btn btn-warning my-2" type="button">查看全部...</div>
            </a>
        </div>
        <div class="bg-white border-1">
            <div class="container p-0 px-md-3">
                <div class="row row-cols-auto row-cols-md-auto row-cols-lg-auto">
                    <a href="/UserProduct/UserProdutList?subcategory=101" class="col mb-3">
                        <div class="card">
                            <img src="~/img/laptop128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">筆電</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=203" class="col mb-3">
                        <div class="card">
                            <img src="~/img/camera128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">相機</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=108" class="col mb-3">
                        <div class="card">
                            <img src="~/img/stereo128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">音響</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=201" class="col mb-3">
                        <div class="card">
                            <img src="~/img/smartphone128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">手機</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=301" class="col mb-3">
                        <div class="card">
                            <img src="~/img/refrigerator128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">冰箱</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=302" class="col mb-3">
                        <div class="card">
                            <img src="~/img/washing-machine128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">洗衣機</h5>
                        </div>
                    </a>
                    <a href="/UserProduct/UserProdutList?subcategory=306" class="col mb-3">
                        <div class="card">
                            <img src="~/img/oven128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">烤箱</h5>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>




    <!-- 賣家品牌館 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">賣家品牌館</h2>
            <button class="btn btn-warning my-2" type="button">查看全部...</button>
        </div>
        <div class="bg-white border-1">
            <div class="container p-0 px-md-3">
                <div class="row row-cols-auto row-cols-md-auto row-cols-lg-auto">
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/xiaomi128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">小米</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/asus128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">ASUS</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/sony128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">SONY</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/Panasonic128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">Panasonic</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/apple-logo128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">Apple</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/samsung128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">Samsung</h5>
                        </div>
                    </a>
                    <a href="#" class="mb-3 col">
                        <div class="card">
                            <img src="~/img/sampo128px.png" class="card-img-top p-2" alt="...">
                            <h5 class="card-title text-blue text-center fw-bold">SAMPO</h5>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>




    <!-- 折價券專區 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">折價券專區</h2>
            @*<button class="btn btn-warning my-2" type="button">查看全部...</button>*@
            <a href="@Url.Action("UserCouponList", "UserCoupon")">
                <input type="button" class="btn btn-warning my-2" value="查看全部..." />
            </a>
        </div>
        <div class="bg-white border-1 d-flex flex-wrap">
            @*<div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>
                <div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>
                <div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>
                <div class="d-flex me-2 coupon-item mb-2">
                    <img src="~/img/coupon.png" alt="">
                    <div class="d-flex flex-column p-2 bg-info">
                        <span>Apple折價券</span>
                        <span>Apple全館打85折</span>
                        <span>20230701-20230731</span>
                        <div class="d-flex">
                            <a href="#">查看賣場<i class="fa-solid fa-caret-right"></i></a>
                            <button type="button" class="btn btn-secondary ms-3">領取</button>
                        </div>
                    </div>
                </div>*@
            @Html.Action("CouponListForMain", "Coupons")
        </div>
    </div>

    <!-- 限時特賣 -->
    <div class="container mt-3 bg-success rounded pb-3">
        <div class="d-flex justify-content-between">
            <h2 class="pt-3 ps-2 fw-bold fs-3 text">限時特賣</h2>
            <button class="btn btn-warning my-2" type="button">查看全部...</button>
        </div>
        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3">
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/sale.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">MIZUNO MAXIMIZER 25 一般型寬楦慢跑鞋</h5>
                        <div class="d-flex align-items-center">
                            <p class="card-text text-danger fw-bold fs-4">$999</p>
                            <p class="text-dark ms-2"><del>$1,680</del></p>
                        </div>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/sale.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">MIZUNO MAXIMIZER 25 一般型寬楦慢跑鞋</h5>
                        <div class="d-flex align-items-center">
                            <p class="card-text text-danger fw-bold fs-4">$999</p>
                            <p class="text-dark ms-2"><del>$1,680</del></p>
                        </div>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/sale.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">MIZUNO MAXIMIZER 25 一般型寬楦慢跑鞋</h5>
                        <div class="d-flex align-items-center">
                            <p class="card-text text-danger fw-bold fs-4">$999</p>
                            <p class="text-dark ms-2"><del>$1,680</del></p>
                        </div>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/sale.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">MIZUNO MAXIMIZER 25 一般型寬楦慢跑鞋</h5>
                        <div class="d-flex align-items-center">
                            <p class="card-text text-danger fw-bold fs-4">$999</p>
                            <p class="text-dark ms-2"><del>$1,680</del></p>
                        </div>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card w-100">
                    <img src="~/img/sale.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">MIZUNO MAXIMIZER 25 一般型寬楦慢跑鞋</h5>
                        <div class="d-flex align-items-center">
                            <p class="card-text text-danger fw-bold fs-4">$999</p>
                            <p class="text-dark ms-2"><del>$1,680</del></p>
                        </div>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="container mt-3 bg-success rounded pb-3">
    <h2 class="pt-3 ps-2 fw-bold fs-3 text">暢銷排行</h2>
    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3">
        @{
            int counter = 0; // 新增計數器
        }
        @foreach (var item in Model)
        {
            var cardClass = ViewBag.PD.Contains(item.ProductId) ? "border-colorful border-5" : "";
            double newprice = ViewBag.PD.Contains(item.ProductId) ? (double)item.Price * 0.5 : (double)item.Price;
            var delprice = ViewBag.PD.Contains(item.ProductId) ? "" : "hidden";
            var timerId = "countdownTimer" + counter; // 為每個計時器創建唯一ID
            <div class="col">
                <div class="card w-100 @cardClass" style="position: relative;">
                    <div class="time-sale-banner" @delprice id="@timerId"></div> <!-- 使用唯一ID -->
                    <img src="~/img/hot1.jpg" class="card-img-top px-4 pt-4" alt="...">
                    <div class="card-body">
                        <h5 class="card-title"> @Html.DisplayFor(modelItem => item.ProductName)</h5>
                        <p class="card-text text-danger fw-bold"><del @delprice>@Math.Round((double)item.Price).ToString("C0")</del>@Math.Round(newprice).ToString("C0")</p>
                        <a href="#" class="btn btn-secondary">了解更多...</a>
                    </div>
                </div>
            </div>

            <script>

                function countdown(endTime, elementId) {
                    var x = setInterval(function () {
                        var now = new Date().getTime();
                        var distance = endTime - now;

                        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                        document.getElementById(elementId).innerHTML = "限時特賣 " + hours + ":" + minutes + ":" + seconds;

                        if (distance < 0) {
                            clearInterval(x);
                            document.getElementById(elementId).innerHTML = "特賣已結束";
                        }
                    }, 1000);
                }

             // 設置倒計時的結束時間
            var endTime = new Date().getTime() + 24 * 60 * 60 * 1000; // 24小時後
            countdown(endTime, "@timerId"); // 使用唯一ID
            </script>
            counter++; // 增加計數器
        }
    </div>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            // Show the modal when the page loads
            $('#adModal').modal('show');

            // Hide the modal when the image is clicked
            $('#adImage').click(function () {
                $('#adModal').modal('hide');
            });

            // Set a timeout to hide the modal after 5 seconds
            setTimeout(function () {
                $('#adModal').modal('hide');
            }, 5000);
        });
    </script>
}

@section Styles{
    <style>
        .modal-content {
            background-color: rgba(0, 0, 0, 0.7); /* 半透明的黑色背景 */
            border: none;
        }

        .modal-body {
            padding: 30px; /* 黑色邊框的大小 */
        }

        #adImage {
            width: 100%; /* 圖片寬度調至最大 */
            height: auto; /* 高度自動調整以保持原始的長寬比 */
            max-height: calc(100% - 60px); /* 保留上下各30px的黑色邊框 */
        }
    </style>
}
